---
title: "CourseworkFinalRMarkdown"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.



## Analysing Hate Crime following the Trump election

**Libraries** 
```{r message=FALSE, warning=FALSE}
library(sf)
library(dplyr)
library(tmap)


```

Read in the election results CSV and check that it has worked properly

```{r}

elections <- read.csv("1976-2016-president.csv", 
                      header = TRUE, sep = ",")                      
head(elections)
class(elections)

```

Check columns have been read in correctly

```{r}
datatypelist <- data.frame(cbind(lapply(elections,class)))
datatypelist

```

Get all elections for 2016 and check it

```{r}
elections2016 <- elections [grep("2016",elections[,1]),]

head(elections2016)
nrow(elections2016)

```

Still have multiple entries per state so need to group just the Trump votes

```{r}

trumpvotes <- elections2016 %>% group_by(state) %>% filter(candidate=="Trump, Donald J.")

head(trumpvotes)
colnames(trumpvotes)


```

Create a new column for the percent of votes Trump received from each state, to account for the difference in population sizes in different states. And provide checks. 

```{r}
trumpvotes$percenttrump <-  trumpvotes$candidatevotes/trumpvotes$totalvotes*100

colnames(trumpvotes)
trumpvotes$percenttrump
class(trumpvotes)

```

























